class e{constructor(e){this.container=document.getElementById(e),this.scene=null,this.camera=null,this.renderer=null,this.controls=null,this.bars=[],this.width=this.container.clientWidth,this.height=this.container.clientHeight,this.init()}init(){this.scene=new THREE.Scene,this.scene.background=new THREE.Color(16777215),this.camera=new THREE.PerspectiveCamera(75,this.width/this.height,.1,1e3),this.camera.position.set(0,5,15),this.camera.lookAt(0,0,0),this.renderer=new THREE.WebGLRenderer({antialias:!0}),this.renderer.setSize(this.width,this.height),this.renderer.shadowMap.enabled=!0,this.container.appendChild(this.renderer.domElement),this.controls=new THREE.OrbitControls(this.camera,this.renderer.domElement),this.controls.enableDamping=!0,this.controls.dampingFactor=.05,this.controls.minDistance=5,this.controls.maxDistance=30,this.controls.maxPolarAngle=Math.PI/2,this.addLights(),this.addGround(),this.animate(),window.addEventListener("resize",()=>this.onWindowResize())}addLights(){const e=new THREE.AmbientLight(4210752,.6);this.scene.add(e);const t=new THREE.DirectionalLight(16777215,.8);t.position.set(5,10,7.5),t.castShadow=!0,this.scene.add(t);const i=new THREE.DirectionalLight(16777215,.3);i.position.set(-5,5,-5),this.scene.add(i)}addGround(){const e=new THREE.PlaneGeometry(20,20),t=new THREE.MeshStandardMaterial({color:15790320,roughness:.8,metalness:.2}),i=new THREE.Mesh(e,t);i.rotation.x=-Math.PI/2,i.position.y=-.01,i.receiveShadow=!0,this.scene.add(i)}renderArray(e,t=[],i=[]){if(this.clearBars(),!e||0===e.length)return;const s=Math.max(...e),n=e.length,r=.3,h=.4*n;e.forEach((e,n)=>{const o=e/s*8,a=.4*n-h/2+.15,d=o/2;let c;c=i.includes(n)?1096065:t.includes(n)?2===t.length?15680580:16347926:1465855;const l=new THREE.BoxGeometry(r,o,.3),m=new THREE.MeshStandardMaterial({color:c,roughness:.5,metalness:.3}),E=new THREE.Mesh(l,m);E.position.set(a,d,0),E.castShadow=!0,this.scene.add(E),this.bars.push(E)})}clearBars(){this.bars.forEach(e=>{this.scene.remove(e),e.geometry.dispose(),e.material.dispose()}),this.bars=[]}animate(){requestAnimationFrame(()=>this.animate()),this.controls.update(),this.renderer.render(this.scene,this.camera)}onWindowResize(){this.width=this.container.clientWidth,this.height=this.container.clientHeight,this.camera.aspect=this.width/this.height,this.camera.updateProjectionMatrix(),this.renderer.setSize(this.width,this.height)}destroy(){window.removeEventListener("resize",()=>this.onWindowResize()),this.clearBars(),this.renderer&&(this.renderer.dispose(),this.container.contains(this.renderer.domElement)&&this.container.removeChild(this.renderer.domElement)),this.controls&&this.controls.dispose()}}"undefined"!=typeof module&&module.exports?module.exports=e:"undefined"!=typeof window&&(window.Visualization3D=e);export{e as Visualization3D};
